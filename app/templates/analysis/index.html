{% extends "base.html" %} 
{% block title %}AI Resume Analyzer{% endblock %} 

{% block content %}
<div id="analyzer-wrapper" class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
    <div x-data="{
        jobDescription: '{{ analysis_request.job_description or '' | e }}',
        apiKey: '{{ analysis_request.api_key or '' }}',
        fileName: '',
        isAnalyzing: false
    }">
        <div class="max-w-4xl mx-auto space-y-8">
            <header class="text-center space-y-4 pt-8">
                <div class="flex items-center justify-center gap-2">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="h-8 w-8 text-indigo-600"
                    >
                      <path d="M7 14C5.34315 14 4 15.3431 4 17C4 18.6569 5.34315 20 7 20C7.35064 20 7.68722 19.9398 8 19.8293"></path>
                      <path d="M4.26392 15.6046C2.9243 14.9582 2.00004 13.587 2.00004 12C2.00004 10.7883 2.53877 9.70251 3.38978 8.96898"></path>
                      <path d="M3.42053 8.8882C3.1549 8.49109 3 8.01363 3 7.5C3 6.11929 4.11929 5 5.5 5C6.06291 5 6.58237 5.18604 7.00024 5.5"></path>
                      <path d="M7.23769 5.56533C7.08524 5.24215 7 4.88103 7 4.5C7 3.11929 8.11929 2 9.5 2C10.8807 2 12 3.11929 12 4.5V20"></path>
                      <path d="M8 20C8 21.1046 8.89543 22 10 22C11.1046 22 12 21.1046 12 20"></path>
                      <path d="M12 7C12 8.65685 13.3431 10 15 10"></path>
                      <path d="M17 14C18.6569 14 20 15.3431 20 17C20 18.6569 18.6569 20 17 20C16.6494 20 16.3128 19.9398 16 19.8293"></path>
                      <path d="M19.7361 15.6046C21.0757 14.9582 22 13.587 22 12C22 10.7883 21.4612 9.70251 20.6102 8.96898"></path>
                      <path d="M20.5795 8.8882C20.8451 8.49109 21 8.01363 21 7.5C21 6.11929 19.8807 5 18.5 5C17.9371 5 17.4176 5.18604 16.9998 5.5"></path>
                      <path d="M12 4.5C12 3.11929 13.1193 2 14.5 2C15.8807 2 17 3.11929 17 4.5C17 4.88103 16.9148 5.24215 16.7623 5.56533"></path>
                      <path d="M16 20C16 21.1046 15.1046 22 14 22C12.8954 22 12 21.1046 12 20"></path>
                    </svg>
                    <h1 class="text-4xl font-bold text-gray-900">AI Resume Analyzer</h1>
                </div>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Upload your resume and job description to get an AI-powered analysis with match score, keywords, and personalized improvement suggestions.
                </p>
                <div class="rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-md text-left">
                    <div class="p-6 pb-4">
                        <h3 class="flex items-center gap-2 font-semibold text-blue-900">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="h-5 w-5"
                            >
                              <path d="M16 12H17.4C17.7314 12 18 12.2686 18 12.6V19.4C18 19.7314 17.7314 20 17.4 20H6.6C6.26863 20 6 19.7314 6 19.4V12.6C6 12.2686 6.26863 12 6.6 12H8M16 12V8C16 6.66667 15.2 4 12 4C8.8 4 8 6.66667 8 8V12M16 12H8"></path>
                            </svg>
                            Privacy & Data Security
                        </h3>
                    </div>
                    <div class="p-6 pt-0 space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="flex items-start gap-3">
                                  <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="h-4 w-4 text-blue-600"
                                    >
                                      <path d="M16 12H17.4C17.7314 12 18 12.2686 18 12.6V19.4C18 19.7314 17.7314 20 17.4 20H6.6C6.26863 20 6 19.7314 6 19.4V12.6C6 12.2686 6.26863 12 6.6 12H8M16 12V8C16 6.66667 15.2 4 12 4C8.8 4 8 6.66667 8 8V12M16 12H8"></path>
                                    </svg>
                                  </div>
                                  <div>
                                    <h4 class="font-semibold text-blue-900 text-sm">
                                      Zero Data Storage
                                    </h4>
                                    <p class="text-xs text-blue-800">
                                      We never store your resumes, job descriptions, or API keys on our servers. All data is processed in real-time and immediately discarded.
                                    </p>
                                  </div>
                                </div>
                                <div class="flex items-start gap-3">
                                  <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="h-4 w-4 text-green-600"
                                    >
                                      <path d="M7 12.5L10 15.5L17 8.5"></path>
                                      <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                                    </svg>

                                  </div>
                                  <div>
                                    <h4 class="font-semibold text-green-900 text-sm">
                                      Secure Transmission
                                    </h4>
                                    <p class="text-xs text-green-800">
                                    All data is transmitted using industry-standard HTTPS encryption and sent directly to OpenAI's secure API endpoints.
                                    </p>
                                  </div>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-start gap-3">
                                  <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                    <svg class="h-4 w-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                    </svg>
                                  </div>
                                  <div>
                                    <h4 class="font-semibold text-purple-900 text-sm">
                                      Temporary Processing
                                    </h4>
                                    <p class="text-xs text-purple-800">
                                      Your data exists only during the analysis process (typically 3-10 seconds) and is automatically purged from memory afterward.
                                    </p>
                                  </div>
                                </div>
                                <div class="flex items-start gap-3">
                                  <div class="flex-shrink-0 w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      viewBox="0 0 24 24"
                                      fill="none"
                                      stroke="currentColor"
                                      stroke-width="2"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      class="h-4 w-4 text-orange-600"
                                    >
                                      <path d="M3 13C6.6 5 17.4 5 21 13"></path>
                                      <path d="M12 17C10.3431 17 9 15.6569 9 14C9 12.3431 10.3431 11 12 11C13.6569 11 15 12.3431 15 14C15 15.6569 13.6569 17 12 17Z"></path>
                                    </svg>

                                  </div>
                                  <div>
                                    <h4 class="font-semibold text-orange-900 text-sm">
                                      Your API Key
                                    </h4>
                                    <p class="text-xs text-orange-800">
                                      Your OpenAI API key is used only for this session and is never logged, stored, or transmitted to any third parties.
                                    </p>
                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="border-t border-blue-200 pt-4 mt-4">
                          
                      <div class="bg-white/50 rounded-lg p-3 border border-blue-100">
                        <div class="flex items-start gap-2">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"
                          >
                            <path d="M12 11.5V16.5"></path>
                            <path d="M12 7.51L12.01 7.49889"></path>
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                          </svg>
                          <div>
                            <p class="text-xs text-blue-900 font-medium">
                              Data Flow:
                            </p>
                            <p class="text-xs text-blue-800">
                              Your resume → Our application → OpenAI API → Analysis results → Displayed to you → All data discarded
                            </p>
                          </div>
                        </div>
                      </div>
                        </div>
                        <div class="flex items-center justify-between pt-2">
                            <div class="flex items-center gap-2">
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border-blue-200 border">
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="h-3 w-3 mr-1"
                                  >
                                    <path d="M16 12H17.4C17.7314 12 18 12.2686 18 12.6V19.4C18 19.7314 17.7314 20 17.4 20H6.6C6.26863 20 6 19.7314 6 19.4V12.6C6 12.2686 6.26863 12 6.6 12H8M16 12V8C16 6.66667 15.2 4 12 4C8.8 4 8 6.66667 8 8V12M16 12H8"></path>
                                  </svg>
                                  GDPR Compliant
                                </span>
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border-green-200 border">
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    class="h-3 w-3 mr-1"
                                  >
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12C1.25 17.9371 6.06294 22.75 12 22.75C17.9371 22.75 22.75 17.9371 22.75 12C22.75 6.06294 17.9371 1.25 12 1.25ZM7.53044 11.9697C7.23755 11.6768 6.76268 11.6768 6.46978 11.9697C6.17689 12.2626 6.17689 12.7374 6.46978 13.0303L9.46978 16.0303C9.76268 16.3232 10.2376 16.3232 10.5304 16.0303L17.5304 9.03033C17.8233 8.73744 17.8233 8.26256 17.5304 7.96967C17.2375 7.67678 16.7627 7.67678 16.4698 7.96967L10.0001 14.4393L7.53044 11.9697Z"></path>
                                  </svg>
                                  No Tracking
                                </span>
                            </div>
                            <a href="#" class="inline-flex items-center text-xs p-1.5 rounded-md font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-100">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="h-3 w-3 mr-1"
                              >
                                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                                <path d="M9 9C9 5.49997 14.5 5.5 14.5 9C14.5 11.5 12 10.9999 12 13.9999"></path>
                                <path d="M12 18.01L12.01 17.9989"></path>
                              </svg>
                              Learn More
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <form hx-post="/analyze" hx-target="#analyzer-wrapper" hx-swap="outerHTML" hx-encoding="multipart/form-data" x-on:htmx:before-request="isAnalyzing = true" class="bg-white shadow-lg rounded-xl">
                <div class="p-6">
                    <h3 class="flex items-center gap-2 text-lg font-semibold text-gray-900">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="h-5 w-5"
                      >
                        <path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z"></path>
                        <path d="M8 10L16 10"></path>
                        <path d="M8 18L16 18"></path>
                        <path d="M8 14L12 14"></path>
                        <path d="M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20"></path>
                      </svg>
                      Resume Analysis Input
                    </h3>
                    <p class="text-sm text-gray-500">Provide the job description, resume file, and your OpenAI API key</p>
                </div>
                <div class="p-6 pt-0 space-y-6">
                    <div class="space-y-2">
                        <label for="job-description" class="block text-sm font-medium text-gray-700">Job Description</label>
                        <textarea id="job-description" name="job_description" x-model="jobDescription" required placeholder="Paste the job description here..." class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-50 text-gray-900 min-h-[150px] resize-none"></textarea>
                    </div>

                    <div class="space-y-2">
                        <label for="resume-upload" class="block text-sm font-medium text-gray-700">Resume Upload</label>
                        <div class="flex items-center gap-4">
                            <input id="resume-upload" name="resume_file" type="file" @change="fileName = $event.target.files.length > 0 ? $event.target.files[0].name : ''" required accept=".pdf,.doc,.docx,.txt" class="flex-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                            <template x-if="fileName">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-3 w-3 mr-1"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                    <span x-text="fileName"></span>
                                </span>
                            </template>
                        </div>
                        <p class="text-sm text-gray-500">Supported formats: PDF, DOC, DOCX, TXT</p>
                    </div>

                    <div class="space-y-2">
                        <label for="api-key" class="flex items-center gap-1 text-sm font-medium text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-3 w-3"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                            OpenAI API Key
                        </label>
                        <input id="api-key" name="api_key" type="password" x-model="apiKey" required placeholder="sk-..." class="font-mono block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-50 text-gray-900">
                        <p class="text-sm text-gray-500">Your API key is only used for this analysis and is not stored on our servers.</p>
                    </div>

                    <div class="flex gap-4">
                        <button 
                          type="submit" 
                          :disabled="isAnalyzing || !jobDescription.trim() || !fileName || !apiKey.trim()" 
                          class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors"
                         >
                            <span x-show="isAnalyzing" class="flex items-center">
                              <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                              </svg>
                              Analyzing Resume...
                            </span>
                            <span x-show="!isAnalyzing" class="flex items-center">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="1.5"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="h-4 w-4 mr-2"
                              >
                                <path d="M7 14C5.34315 14 4 15.3431 4 17C4 18.6569 5.34315 20 7 20C7.35064 20 7.68722 19.9398 8 19.8293"></path>
                                <path d="M4.26392 15.6046C2.9243 14.9582 2.00004 13.587 2.00004 12C2.00004 10.7883 2.53877 9.70251 3.38978 8.96898"></path>
                                <path d="M3.42053 8.8882C3.1549 8.49109 3 8.01363 3 7.5C3 6.11929 4.11929 5 5.5 5C6.06291 5 6.58237 5.18604 7.00024 5.5"></path>
                                <path d="M7.23769 5.56533C7.08524 5.24215 7 4.88103 7 4.5C7 3.11929 8.11929 2 9.5 2C10.8807 2 12 3.11929 12 4.5V20"></path>
                                <path d="M8 20C8 21.1046 8.89543 22 10 22C11.1046 22 12 21.1046 12 20"></path>
                                <path d="M12 7C12 8.65685 13.3431 10 15 10"></path>
                                <path d="M17 14C18.6569 14 20 15.3431 20 17C20 18.6569 18.6569 20 17 20C16.6494 20 16.3128 19.9398 16 19.8293"></path>
                                <path d="M19.7361 15.6046C21.0757 14.9582 22 13.587 22 12C22 10.7883 21.4612 9.70251 20.6102 8.96898"></path>
                                <path d="M20.5795 8.8882C20.8451 8.49109 21 8.01363 21 7.5C21 6.11929 19.8807 5 18.5 5C17.9371 5 17.4176 5.18604 16.9998 5.5"></path>
                                <path d="M12 4.5C12 3.11929 13.1193 2 14.5 2C15.8807 2 17 3.11929 17 4.5C17 4.88103 16.9148 5.24215 16.7623 5.56533"></path>
                                <path d="M16 20C16 21.1046 15.1046 22 14 22C12.8954 22 12 21.1046 12 20"></path>
                              </svg>
                              Analyze Resume
                            </span>
                        </button>
                        {% if analysis_result %}<a href="/" class="inline-flex items-center px-4 py-2 border border-gray-300 text-base font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">New Analysis</a>{% endif %}
                    </div>
                </div>
            </form>

            {% if analysis_result %}
            <div class="space-y-6">
                {% if analysis_result.error %}
                <div class="rounded-md bg-red-50 p-4 shadow"><p class="text-sm font-medium text-red-800">Error: {{ analysis_result.error }}</p></div>
                {% else %}
                <div class="bg-white shadow-lg rounded-xl">
                    <div class="p-6">
                        <h3 class="flex items-center gap-2 text-lg font-semibold text-gray-900">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="h-5 w-5 text-green-600"
                          >
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                            <path d="M15.5 16C15.7761 16 16 15.7761 16 15.5C16 15.2239 15.7761 15 15.5 15C15.2239 15 15 15.2239 15 15.5C15 15.7761 15.2239 16 15.5 16Z" fill="currentColor"></path>
                            <path d="M8.5 9C8.77614 9 9 8.77614 9 8.5C9 8.22386 8.77614 8 8.5 8C8.22386 8 8 8.22386 8 8.5C8 8.77614 8.22386 9 8.5 9Z" fill="currentColor"></path>
                            <path d="M16 8L8 16"></path>
                          </svg>
                          Match Score
                        </h3>
                        <p class="text-sm text-gray-500">How well your resume matches the job description</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-2xl font-bold text-gray-800">
                                  {{ analysis_result.match_score }}%
                                </span>
                                {% if analysis_result.match_score >= 80 %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                  Excellent Match
                                </span>
                                {% elif analysis_result.match_score >= 60 %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                                  Good Match
                                </span>
                                {% else %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
                                  Needs Improvement
                                </span>
                                {% endif %}
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                              <div class="bg-green-500 h-3 rounded-full" style="width: {{ analysis_result.match_score }}%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white shadow-lg rounded-xl">
                    <div class="p-6">
                        <h3 class="flex items-center gap-2 text-lg font-semibold text-gray-900">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="h-5 w-5 text-green-600"
                          >
                            <path d="M7 12.5L10 15.5L17 8.5"></path>
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                          </svg>
                          Compatible Keywords
                        </h3>
                        <p class="text-sm text-gray-500">Keywords from the job description that are present in your resume</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="flex flex-wrap gap-2">
                            {% for keyword in analysis_result.compatible_keywords %}
                            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border-green-300 border">{{ keyword }}</span>
                            {% else %}
                            <p class="text-sm text-gray-500">No matching keywords found. Consider adding relevant terms from the job description.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="bg-white shadow-lg rounded-xl">
                    <div class="p-6">
                        <h3 class="flex items-center gap-2 text-lg font-semibold text-gray-900">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="h-5 w-5 text-orange-600"
                          >
                            <path d="M12 7L12 13"></path>
                            <path d="M12 17.01L12.01 16.9989"></path>
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                          </svg>
                          Missing Keywords
                        </h3>
                        <p class="text-sm text-gray-500">Important keywords from the job description that are missing from your resume</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="flex flex-wrap gap-2">
                            {% for keyword in analysis_result.missing_keywords %}
                            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-sm font-medium text-orange-700 border-orange-300 border">{{ keyword }}</span>
                            {% else %}
                            <p class="text-sm font-medium text-green-600">Great! Your resume includes all the key terms from the job description.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="bg-white shadow-lg rounded-xl">
                    <div class="p-6">
                        <h3 class="flex items-center gap-2 text-lg font-semibold text-gray-900">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="h-5 w-5 text-blue-600"
                          >
                            <path d="M9 18H15"></path>
                            <path d="M10 21H14"></path>
                            <path d="M9.00082 15C9.00098 13 8.50098 12.5 7.50082 11.5C6.50067 10.5 6.02422 9.48689 6.00082 8C5.95284 4.95029 8.00067 3 12.0008 3C16.001 3 18.0488 4.95029 18.0008 8C17.9774 9.48689 17.5007 10.5 16.5008 11.5C15.501 12.5 15.001 13 15.0008 15"></path>
                          </svg>
                          Improvement Suggestions
                        </h3>
                        <p class="text-sm text-gray-500">AI-powered recommendations to enhance your resume</p>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="space-y-4">
                            {% for suggestion in analysis_result.suggestions %}
                            <div class="flex gap-3">
                              <div class="flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-sm font-medium">
                                {{ loop.index }}
                              </div><p class="text-gray-800 leading-relaxed">
                              {{ suggestion }}
                              </p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                
                <div x-data="{ promptText: `{{ analysis_result.prompt | e }}` }" class="rounded-xl border-indigo-200 border bg-gradient-to-r from-indigo-50 to-purple-50 shadow-lg">
                    <div class="p-6">
                        <h3 class="flex items-center gap-2 text-lg font-semibold text-indigo-900">
                          <svg class="h-5 w-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                          </svg>
                          AI Resume Editor Prompt
                        </h3>
                        <p class="text-sm text-indigo-800/80">Copy this prompt to use with ChatGPT, Gemini, or other AI tools to improve your resume</p>
                    </div>
                    <div class="p-6 pt-0 space-y-4">
                        <div class="bg-white/70 rounded-lg p-4 border border-indigo-200">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-sm font-medium text-indigo-900">Generated Prompt</span>
                                <button 
                                  @click="navigator.clipboard.writeText(promptText); alert('Prompt copied to clipboard!')" 
                                  class="inline-flex items-center gap-2 px-3 py-1.5 border border-indigo-300 text-sm font-medium rounded-md text-indigo-700 bg-white/50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                                >
                                  <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                  </svg>
                                  Copy Prompt
                                </button>
                            </div>
                            <div class="bg-gray-50 rounded-md p-3 max-h-48 overflow-y-auto">
                                <pre class="text-xs text-gray-700 whitespace-pre-wrap font-mono">{{ analysis_result.prompt }}</pre>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-indigo-700">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              class="h-4 w-4"
                            >
                              <path d="M12 11.5V16.5"></path>
                              <path d="M12 7.51L12.01 7.49889"></path>
                              <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path>
                            </svg>

                            <span>Paste this prompt into ChatGPT, Gemini, or Claude along with your current resume text</span>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}

            <footer class="mt-16 pt-8 border-t border-gray-200">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                    <div class="text-sm text-gray-600">Built with ❤️ for better career opportunities</div>
                    <div class="flex items-center gap-4">
                        <a href="https://github.com/yourusername" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-100">
                          <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                          </svg>
                          GitHub
                        </a>
                        <a href="https://linkedin.com/in/yourusername" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-100">
                          <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                          </svg>
                          LinkedIn
                        </a>
                        <a href="mailto:your.email@example.com" class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-100">
                          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                          </svg>
                          Email
                        </a>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</div>
{% endblock %}
